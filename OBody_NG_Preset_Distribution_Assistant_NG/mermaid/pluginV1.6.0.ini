flowchart TD
    A[ğŸš€ SKSE Plugin Load] --> B[ğŸ“ InicializaciÃ³n BÃ¡sica<br/>GetDocumentsPath + GetGamePath<br/>CreateDirectoryIfNotExists]
    B --> C[âš™ï¸ Leer Config Backup INI<br/>ReadBackupConfigFromIni<br/>Crear si no existe con Backup=1]
    C --> D[ğŸ” Chequeo BÃSICO JSON<br/>VerificaciÃ³n simple de existencia<br/>SIN PerformSimpleJsonIntegrityCheck avanzado]
    
    D --> E{â“ JSON Maestro<br/>Existe?}
    E -->|NO| F[âŒ TERMINAR PROCESO<br/>JSON No Encontrado<br/>SIN restauraciÃ³n automÃ¡tica]
    E -->|SÃ| G{ğŸ”„ Backup<br/>Config?}
    
    G -->|Backup=1| H[ğŸ’¾ Backup BÃSICO<br/>PerformJsonBackup<br/>Copia simple sin verificaciÃ³n avanzada]
    G -->|Backup=0| I[ğŸ“– Leer JSON Existente<br/>ReadCompleteJson<br/>parseOrderedPlugins bÃ¡sico]
    
    H --> J[âœï¸ Actualizar INI<br/>UpdateBackupConfigInIni<br/>Backup = 0]
    J --> I
    
    I --> K{âœ… Lectura JSON<br/>readSuccess?}
    K -->|NO| L[âŒ TERMINAR PROCESO<br/>JSON READ FAILED<br/>SIN sistema de recuperaciÃ³n]
    K -->|SÃ| M[ğŸ“‚ Escanear Data Folder<br/>directory_iterator<br/>OBodyNG_PDA_*.ini]
    
    M --> N[ğŸ“ Procesar Reglas INI<br/>ParseRuleLine bÃ¡sico<br/>Add/Remove Presets/Plugins<br/>Conteos simples]
    N --> O[ğŸ”¢ Actualizar Conteos INI<br/>UpdateIniRuleCount<br/>Decrementar bÃ¡sico]
    O --> P[ğŸ“Š Log Summary BÃ¡sico<br/>EstadÃ­sticas simples<br/>Rules/Files/Presets]
    
    P --> Q[ğŸ—ï¸ Actualizar JSON<br/>UpdateJsonSelectively<br/>Preservar original bÃ¡sico<br/>SIN formato 4 espacios avanzado]
    Q --> R[ğŸ’¾ Escritura BÃSICA<br/>Escritura directa al archivo<br/>SIN WriteJsonAtomically]
    
    R --> S{âœ… Escritura<br/>Exitosa?}
    S -->|NO| T[âŒ ERROR ESCRITURA<br/>SIN restauraciÃ³n de backup<br/>Proceso fallido]
    S -->|SÃ| U[ğŸ” FORMATO BÃSICO<br/>PrettyPrintJson<br/>IndentaciÃ³n simple SIN detecciÃ³n avanzada]
    
    U --> V{ğŸ“ Formato<br/>Aplicado?}
    V -->|NO| W[âœï¸ REFORMATEAR BÃSICO<br/>4 espacios simples<br/>SIN isEmptyBlock helper]
    V -->|SÃ| X[âœ… JSON BÃ¡sico Completo<br/>Formato simple aplicado<br/>SIN validaciones avanzadas]
    
    W --> Y{âœ… Reformateo<br/>BÃ¡sico OK?}
    Y -->|NO| Z[âŒ ERROR FORMATO<br/>Proceso con advertencias]
    Y -->|SÃ| X
    
    X --> AA[ğŸ“Š Log Final BÃ¡sico<br/>Process completed<br/>Basic JSON formatting]
    Z --> AA
    T --> AA
    
    AA --> BB[ğŸ’¬ Mensaje Consola BÃ¡sico<br/>OBody Assistant: Basic process completed!]
    BB --> CC[ğŸ FIN: Proceso BÃ¡sico Completo<br/>JSON con formato simple<br/>SIN caracterÃ­sticas avanzadas de seguridad]
    
    F --> DD[ğŸ FIN: JSON No Encontrado<br/>SIN recuperaciÃ³n automÃ¡tica<br/>CONTACT MODDER OR REINSTALL!]
    L --> EE[ğŸ FIN: Error Lectura<br/>SIN sistema de recuperaciÃ³n]
    
    %% Estilos
    classDef startEnd fill:#e1f5fe,stroke:#01579b,stroke-width:3px,color:#333
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px,color:#333
    classDef decision fill:#fff3e0,stroke:#e65100,stroke-width:2px,color:#333
    classDef error fill:#ffebee,stroke:#b71c1c,stroke-width:2px,color:#333
    classDef backup fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px,color:#333
    classDef basicFeature fill:#f5f5f5,stroke:#616161,stroke-width:2px,color:#333
    classDef logFeature fill:#f1f8e9,stroke:#558b2f,stroke-width:2px,color:#333
    
    class A,CC,DD,EE startEnd
    class B,C,I,M,N,O,P,Q,R process
    class E,G,K,S,V,Y decision
    class F,L,T,Z error
    class H,J backup
    class D,U,W,X basicFeature
    class AA,BB logFeature
